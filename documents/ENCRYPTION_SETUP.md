# Настройка шифрования API ключей

## Обзор

API ключи Ozon автоматически шифруются в базе данных с помощью `CryptoStringConverter` (AES/GCM алгоритм).

## Переменная окружения

### OZON_CRYPT_KEY

**Обязательная переменная окружения** для шифрования API ключей.

**Формат:** 32 символа (256 бит)

**Пример:**
```bash
export OZON_CRYPT_KEY="your-32-character-encryption-key-here"
```

**Генерация ключа:**
```bash
# Генерация случайного 32-символьного ключа
openssl rand -base64 24 | tr -d "=+/" | cut -c1-32
```

## Безопасность

- **Алгоритм:** AES/GCM/NoPadding
- **Длина ключа:** 256 бит (32 символа)
- **IV:** Случайный 12-байтовый вектор инициализации для каждого шифрования
- **Тег аутентификации:** 128 бит

## Миграция данных

При первом запуске с настроенным шифрованием:
1. Существующие незашифрованные API ключи будут автоматически зашифрованы при следующем обновлении
2. Новые API ключи шифруются сразу при сохранении

## Проверка шифрования

В логах зашифрованные API ключи отображаются как `***ENCRYPTED***`.

## Важно

- **Никогда не коммитьте ключ шифрования в репозиторий**
- **Храните ключ в безопасном месте**
- **Используйте разные ключи для разных окружений (dev, staging, prod)**
- **При смене ключа потребуется перешифрование всех данных**
